<% extend GamificationPlugin::DashboardHelper %>

<div class="gamification">
  <h1><%= _('Gamification Dashboard for %s' % @target.identifier) %></h1>

  <div>
    <h3> <%= _('Level') %></h3>
    <%= level_chart(@target) %>
  </div>

  <div class="scores">
    <h3><%= _('Score') %></h3>
    <% Merit::PointRules::AVAILABLE_RULES.each do |category, setting| %>
      <div class="score <%= category %>">
        <span class="label"><%= _('%s: ' % category) %></span>
        <span class="value"><%= @target.points(:category => category) %></span>
      </div>
    <% end %>
    <div class="score total">
      <span class="label"><%= _('Total: ') %></span>
      <span class="value"><%= @target.points %></span>
    </div>
  </div>
  <div class="badges">
    <h3><%= _('Badges') %></h3>
    <ul class="badge-list">
      <% @target.badges.each do |badge| %>
        <li class="badge <%= badge.name %>">
          <span class="description"><%= badge.description %></span>
          <% if badge.level.present? %>
            <span class="label"><%= _('Level') %></span>&nbsp;<span class="level"><%= badge.level %></span>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</div>
